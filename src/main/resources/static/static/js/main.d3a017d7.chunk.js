(this["webpackJsonphmdrf-ui"]=this["webpackJsonphmdrf-ui"]||[]).push([[0],{189:function(e,t,n){},190:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},424:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(0),s=n.n(c),r=n(55),i=n.n(r),o=(n(189),n(26)),l=n(27),u=n(54),d=n(53),h=(n(190),n(97)),j=n(34),b=n.n(j),O=new(function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,[{key:"ping",value:function(){return b.a.get("/auth/ping")}},{key:"authenticate",value:function(e){return b.a.post("/auth/authenticate",e)}},{key:"getUsername",value:function(e){var t={Authorization:"Bearer "+e};return b.a.post("/auth/username/get",{},{headers:t})}},{key:"checkTokenValid",value:function(e){var t={Authorization:"Bearer "+e};return b.a.get("/auth/validate",{headers:t})}}]),e}()),m=(n(209),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=e.target,n=t.name,c=t.value;a.setState(Object(h.a)({},n,c))},a.handleSubmit=function(e){var t={username:a.state.username,password:a.state.pwd};return O.authenticate(t).then((function(e){e.data.success?(localStorage.setItem("hmToken",e.data.token),a.props.isLogin(!0)):alert("Wrong credentials")})),e.preventDefault(),!1},a.state={username:"",pwd:"",jwtToken:"",history:""},a}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"header-login",children:Object(a.jsxs)("h1",{children:[Object(a.jsx)("i",{className:"fas fa-dice-d20"}),"HMDRF"]})}),Object(a.jsxs)("div",{className:"login-div",children:[Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(a.jsx)("h3",{children:"Sign In"}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"auth-label",children:"Username"}),Object(a.jsx)("input",{type:"text",className:"form-control",name:"username",required:!0,onChange:this.handleChange})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"auth-label",children:"Password"}),Object(a.jsx)("input",{type:"password",className:"form-control",name:"pwd",placeholder:"******",required:!0,onChange:this.handleChange})]}),Object(a.jsx)("button",{className:"btn btn-primary btn-block loginButton",onSubmit:this.handleSubmit,children:"Log In!"})]}),Object(a.jsx)("h1",{children:this.state.jwtToken})]})]})}}]),n}(s.a.Component)),f=n(17),v=(n(210),new(function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,[{key:"getHMBal",value:function(e){var t={Authorization:"Bearer "+e};return b.a.get("/api/funds/hmbal/get",{headers:t})}},{key:"getTransactions",value:function(e){var t={Authorization:"Bearer "+e};return b.a.get("/api/funds/transactions/getAll",{headers:t})}},{key:"transferFunds",value:function(e,t){var n={Authorization:"Bearer "+e};return b.a.post("/api/funds/transfer",t,{headers:n})}}]),e}())),p=n(99),x=new(function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,[{key:"getAllAccounts",value:function(e){var t={Authorization:"Bearer "+e};return b.a.get("/api/balance/accounts/get",{headers:t})}},{key:"getAllAccountsDetails",value:function(e){var t={Authorization:"Bearer "+e};return b.a.get("/api/balance/accounts/getAll",{headers:t})}},{key:"createNewAccount",value:function(e,t){var n={Authorization:"Bearer "+e};return b.a.post("/api/balance/create",t,{headers:n})}}]),e}()),g=n(428),k=n(427);n(211);function y(e){var t=Object(c.useState)(!1),n=Object(p.a)(t,2),s=n[0],r=n[1],i=Object(c.useState)(""),o=Object(p.a)(i,2),l=o[0],u=o[1],d=Object(c.useState)(0),h=Object(p.a)(d,2),j=h[0],b=h[1],O=function(){return r(!1)};return Object(a.jsxs)("div",{className:"add_new_account",children:[Object(a.jsx)(g.a,{className:"new_acc_button",variant:"primary",onClick:function(){return r(!0)},children:"Add new account"}),Object(a.jsxs)(k.a,{show:s,onHide:O,children:[Object(a.jsx)(k.a.Header,{closeButton:!0,children:Object(a.jsx)(k.a.Title,{children:"Create new account"})}),Object(a.jsxs)(k.a.Body,{children:[Object(a.jsx)("label",{children:"Name: "}),Object(a.jsx)("input",{type:"text",name:"name",required:!0,onChange:function(e){return u(e.target.value)}}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"Initial Amount: "}),Object(a.jsx)("input",{type:"text",name:"amount",required:!0,onChange:function(e){return b(e.target.value)}})]}),Object(a.jsxs)(k.a.Footer,{children:[Object(a.jsx)(g.a,{variant:"secondary",onClick:O,children:"Close"}),Object(a.jsx)(g.a,{variant:"primary",onClick:function(){var t={name:l,amount:j};x.createNewAccount(e.token,t).then((function(t){t.data.success?(e.updateAccountAndOutstanding(),r(!1)):alert(t.data.msg)}))},children:"Create Account"})]})]})]})}var A=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={accounts:[],sender:"HMDRF",recipient:"HMDRF",amount:0,note:""},e.handleChange=function(t){var n=t.target,a=n.name,c=n.value;e.setState(Object(h.a)({},a,c))},e.handleSubmit=function(){var t={sender:e.state.sender,recipient:e.state.recipient,amount:e.state.amount,note:e.state.note};v.transferFunds(e.props.token,t).then((function(t){t.data.success?(e.props.updateTransaction(),e.props.updateHMBal(),e.props.updateOutstanding(),e.setState({amount:0,note:""})):alert("FAILED: "+t.data.msg)})),console.log(t)},e.handleNewAccount=function(){e.getAccounts(),e.props.updateOutstanding()},e}return Object(l.a)(n,[{key:"getAccounts",value:function(){var e=this;x.getAllAccounts(this.props.token).then((function(t){t.data.success&&e.setState({accounts:t.data.accounts})}))}},{key:"componentDidMount",value:function(){this.getAccounts()}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{class:"transactions_create",children:Object(a.jsxs)("div",{className:"row_one",children:[Object(a.jsxs)("div",{className:"column_one",children:[Object(a.jsx)("label",{children:"Sender "}),Object(a.jsx)("select",{name:"sender",required:!0,onChange:this.handleChange,children:this.state.accounts.map((function(e){return Object(a.jsx)("option",{value:e,children:e})}))}),Object(a.jsx)("label",{children:"Recipient "}),Object(a.jsx)("select",{name:"recipient",required:!0,onChange:this.handleChange,children:this.state.accounts.map((function(e){return Object(a.jsx)("option",{value:e,children:e})}))}),Object(a.jsx)("label",{children:"Amount "}),Object(a.jsx)("input",{type:"number",value:this.state.amount,name:"amount",step:".01",required:!0,onChange:this.handleChange})]}),Object(a.jsxs)("div",{className:"column_two",children:[Object(a.jsx)("label",{children:"Note: "}),Object(a.jsx)("textarea",{name:"note",value:this.state.note,placeholder:"Reason to send money?",required:!0,onChange:this.handleChange})]}),Object(a.jsxs)("div",{className:"column_three",children:[Object(a.jsx)("button",{className:"transaction_submit_button",type:"submit",onClick:this.handleSubmit,children:"Transfer"}),Object(a.jsx)(y,{token:this.props.token,updateAccountAndOutstanding:function(){return e.handleNewAccount()}})]})]})})}}]),n}(s.a.Component),_=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).token=localStorage.getItem("hmToken"),e.state={username:"BOB ROSS",hmdrf_balance:0,transactions:[],balances:[]},e}return Object(l.a)(n,[{key:"fetchUsername",value:function(){var e=this;O.getUsername(this.token).then((function(t){t.data.success&&e.setState({username:t.data.msg})}))}},{key:"fetchHMDRFBalance",value:function(){var e=this;v.getHMBal(this.token).then((function(t){t.data.success&&e.setState({hmdrf_balance:t.data.balance})}))}},{key:"fetchAllTransactions",value:function(){var e=this;v.getTransactions(this.token).then((function(t){t.data.success&&e.setState({transactions:t.data.transactions})}))}},{key:"fetchOutstandingBalances",value:function(){var e=this;x.getAllAccountsDetails(this.token).then((function(t){t.data.success&&e.setState({balances:t.data.accounts})}))}},{key:"componentDidMount",value:function(){this.token=localStorage.getItem("hmToken"),this.fetchUsername(),this.fetchHMDRFBalance(),this.fetchAllTransactions(),this.fetchOutstandingBalances()}},{key:"formatDate",value:function(e){var t=new Date(e).toDateString();return new Date(e).toLocaleTimeString()+", "+t}},{key:"render",value:function(){var e=this,t=this.state.username,n=this.state.hmdrf_balance;return Object(a.jsxs)("div",{class:"row",children:[Object(a.jsxs)("div",{class:"column",id:"profile_and_hm_balance",children:[Object(a.jsx)("div",{class:"profile",children:Object(a.jsxs)("h2",{children:["Welcome ",t,"!"]})}),Object(a.jsxs)("div",{class:"hm_balance",children:[Object(a.jsx)("h3",{children:"Current HMDRF Balance"}),Object(a.jsxs)("h4",{children:["Rs ",n]})]})]}),Object(a.jsxs)("div",{id:"show_and_create_transactions",children:[Object(a.jsx)("div",{class:"transactions_header",children:Object(a.jsx)("h2",{children:"Transactions"})}),Object(a.jsx)("div",{class:"transactions_scroll_view",children:Object(a.jsx)("ul",{class:"transactions_list",children:this.state.transactions.map((function(t){return Object(a.jsxs)("li",{children:[Object(a.jsxs)("div",{className:"row_txn",children:[Object(a.jsxs)("div",{className:"to_fro_div",children:[Object(a.jsx)("span",{class:"sender",children:t.sender}),Object(a.jsx)("i",{class:"fas fa-angle-double-right"}),Object(a.jsx)("span",{className:"receiver",children:t.recipient})]}),Object(a.jsxs)("div",{className:"amount_div",children:[Object(a.jsx)("i",{class:"fas fa-wallet"}),Object(a.jsxs)("span",{className:"amount_span",children:["Rs. ",Object(a.jsx)("span",{className:"amount",children:t.amount})," "]})]})]}),Object(a.jsx)("i",{class:"fas fa-comment note_icon"})," ",Object(a.jsx)("span",{className:"note",children:t.note}),Object(a.jsx)("br",{}),Object(a.jsx)("i",{class:"fas fa-calendar-day time_icon"}),Object(a.jsx)("span",{className:"time",children:e.formatDate(t.txnDate)})]},t.id)}))})}),Object(a.jsxs)("div",{className:"create_transaction_pane",children:[Object(a.jsx)("h3",{children:"Transfer Funds"}),Object(a.jsx)(A,{token:this.token,updateTransaction:function(){return e.fetchAllTransactions()},updateHMBal:function(){return e.fetchHMDRFBalance()},updateOutstanding:function(){return e.fetchOutstandingBalances()}})]})]}),Object(a.jsxs)("div",{class:"column",id:"outstanding_balance",style:{backgroundColor:"green"},children:[Object(a.jsx)("h2",{children:"Outstanding"}),Object(a.jsxs)("table",{class:"outstanding_table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:"Name"}),Object(a.jsx)("td",{children:"Balance"})]})}),Object(a.jsx)("tbody",{children:this.state.balances.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:e.name}),Object(a.jsx)("td",{children:e.balance})]})}))})]})]})]})}}]),n}(s.a.Component),N=(n(215),n(420),n(421),localStorage.getItem("hmToken")),w=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleLogin=function(e){return a.setState({isLog:e})},a.state={isLog:!1},a}return Object(l.a)(n,[{key:"validateToken",value:function(e){var t=this;e&&O.checkTokenValid(e).then((function(e){var n=e.data.success;console.log(e),n&&t.setState({isLog:!0})}))}},{key:"componentDidMount",value:function(){this.validateToken(N)}},{key:"render",value:function(){var e=this,t=this.state.isLog;return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(f.c,{children:Object(a.jsx)(f.a,{exact:!0,path:"/",render:function(){return t?Object(a.jsx)(_,{}):Object(a.jsx)(m,{isLogin:e.handleLogin})}})})})}}]),n}(s.a.Component),S=n(126);i.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(S.a,{children:Object(a.jsx)(w,{})})}),document.getElementById("root"))}},[[424,1,2]]]);
//# sourceMappingURL=main.d3a017d7.chunk.js.map